<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cluedo: El Caso de Paula</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>CLUEDO</h1>
            <h2>Misterio en Oviedo</h2>
            <p class="subtitle">La investigación sobre la muerte de Paula</p>
            <div class="divider"></div>
        </header>

        <section class="objetivo">
            <h3>I. El Objetivo</h3>
            <p>Paula ha sido asesinada. Tu misión es descubrir las tres respuestas ocultas en el Sobre Confidencial
                antes que nadie:</p>
            <ul>
                <li><strong>¿Quién</strong> lo hizo? (Sospechoso)</li>
                <li><strong>¿Con qué</strong> arma? (Objeto)</li>
                <li><strong>¿Dónde</strong> ocurrió? (Lugar de Oviedo)</li>
            </ul>
        </section>

        <section class="preparacion">
            <h3>II. Preparación de la Partida</h3>
            <ol>
                <li>Separad las cartas en tres montones: Sospechosos, Armas y Lugares.</li>
                <li>Sin que nadie mire, coged <strong>una carta de cada montón</strong> y metedlas en el Sobre del
                    Crimen.</li>
                <li>Mezclad el resto de cartas todas juntas y repartidlas entre los jugadores.</li>
                <li>Cada jugador recibe una hoja de notas y un peón en la casilla de salida.</li>
            </ol>
        </section>

        <section class="juego">
            <h3>III. Cómo se juega el turno</h3>
            <p>En tu turno, lanza los dados y mueve tu ficha por las casillas (vertical u horizontal, nunca diagonal).
            </p>
            <h4>Entrar en una habitación</h4>
            <p>Si llegas a una habitación (ej. <em>Teatro Campoamor</em>), entra y formula una
                <strong>Sugerencia</strong>.</p>
        </section>

        <section class="mecanica-clave">
            <h3>IV. La Sugerencia (Investigar)</h3>
            <p>Debes traer al sospechoso y al arma a esa habitación.</p>
            <p><em>Ejemplo: "Sugiero que fueron <strong>Irene, Thalía y Natalia</strong> con la <strong>Llave
                        Inglesa</strong> en el <strong>Teatro Campoamor</strong>".</em></p>
            <h4>¿Qué hacen los demás?</h4>
            <ul>
                <li>El jugador a tu izquierda mira sus cartas. Si tiene alguna de las 3 que has dicho, <strong>te enseña
                        UNA en secreto</strong>.</li>
                <li>Si no tiene ninguna, pasa al siguiente jugador.</li>
                <li>Si te enseñan una carta, márcala en tu hoja. Tu turno termina.</li>
            </ul>
        </section>

        <section class="final">
            <h3>V. La Acusación (Resolver)</h3>
            <p>Solo cuando sepas la verdad, haz una <strong>Acusación</strong>.</p>
            <ul>
                <li>Di en voz alta: "Acuso a [X] con [Y] en [Z]".</li>
                <li>Mira el sobre en secreto.</li>
            </ul>
            <div class="alert">
                <p><strong>¿Acertaste?</strong> ¡Has ganado!</p>
                <p><strong>¿Fallaste?</strong> Estás eliminado, devuelve las cartas al sobre.</p>
            </div>
        </section>

        <section class="dado-section">
            <h3>Lanza el Dado</h3>
            <div class="scene">
                <div class="cube" id="dado3d">
                    <div class="cube__face cube__face--1">
                        <span class="dot center"></span>
                    </div>
                    <div class="cube__face cube__face--2">
                        <span class="dot top-left"></span><span class="dot bottom-right"></span>
                    </div>
                    <div class="cube__face cube__face--3">
                        <span class="dot top-left"></span><span class="dot center"></span><span
                            class="dot bottom-right"></span>
                    </div>
                    <div class="cube__face cube__face--4">
                        <span class="dot top-left"></span><span class="dot top-right"></span>
                        <span class="dot bottom-left"></span><span class="dot bottom-right"></span>
                    </div>
                    <div class="cube__face cube__face--5">
                        <span class="dot top-left"></span><span class="dot top-right"></span>
                        <span class="dot center"></span>
                        <span class="dot bottom-left"></span><span class="dot bottom-right"></span>
                    </div>
                    <div class="cube__face cube__face--6">
                        <span class="dot top-left"></span><span class="dot top-right"></span>
                        <span class="dot mid-left"></span><span class="dot mid-right"></span>
                        <span class="dot bottom-left"></span><span class="dot bottom-right"></span>
                    </div>
                </div>
            </div>
            <button id="btnLanzar">LANZAR DADO</button>
            <p id="resultadoTexto">Resultado: -</p>
        </section>

        <footer>
            <p>Expediente Nº 1948 - Oviedo</p>
            <p>Buena suerte, detectives.</p>
        </footer>
    </div>
    <script>
        const dado = document.getElementById('dado3d');
        const btn = document.getElementById('btnLanzar');
        const resultadoTexto = document.getElementById('resultadoTexto');

        // Definimos las rotaciones. IMPORTANTE: translateZ(-50px) debe ir siempre delante
        // para mantener el cubo en su sitio.
        const baseTransform = 'translateZ(-50px) ';

        const rotaciones = {
            1: 'rotateX(0deg) rotateY(0deg)',
            2: 'rotateY(-90deg)',
            3: 'rotateY(180deg)',
            4: 'rotateY(90deg)',
            5: 'rotateX(-90deg)',
            6: 'rotateX(90deg)'
        };

        btn.addEventListener('click', () => {
            btn.disabled = true;
            resultadoTexto.textContent = "Rodando...";

            const resultado = Math.floor(Math.random() * 6) + 1;

            // 1. Resetear (Quitamos transición y animación)
            dado.style.transition = 'none';
            dado.style.animation = 'none';
            // Compatibilidad móvil
            dado.style.webkitTransition = 'none';
            dado.style.webkitAnimation = 'none';

            // Ponemos el dado en posición base
            dado.style.transform = baseTransform + 'rotateX(0deg) rotateY(0deg)';
            dado.style.webkitTransform = baseTransform + 'rotateX(0deg) rotateY(0deg)';

            // Forzamos al navegador a "darse cuenta" del cambio (Reflujo)
            void dado.offsetWidth;

            // 2. Aplicar animación CSS
            dado.style.animation = 'rodar 1s ease-out forwards';
            dado.style.webkitAnimation = 'rodar 1s ease-out forwards'; // Para iPhone

            // 3. Resultado final
            setTimeout(() => {
                // Paramos animación
                dado.style.animation = 'none';
                dado.style.webkitAnimation = 'none';

                // Activamos transición suave para el ajuste final
                dado.style.transition = 'transform 0.5s ease-out';
                dado.style.webkitTransition = '-webkit-transform 0.5s ease-out';

                // Aplicamos la rotación final
                const transformFinal = baseTransform + rotaciones[resultado];
                dado.style.transform = transformFinal;
                dado.style.webkitTransform = transformFinal; // Para iPhone

                resultadoTexto.textContent = "Resultado: " + resultado;
                btn.disabled = false;
            }, 1000);
        });
    </script>
</body>

</html>